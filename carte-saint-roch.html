<!DOCTYPE html>
<html lang="fr">
<head>
	<base target="_top">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>Carte Saint-Roch</title>
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

	<style>
		html, body {
			height: 100%;
			margin: 0;
		}
		.leaflet-container {
			height: 400px;
			width: 600px;
			max-width: 100%;
			max-height: 100%;
		}
	</style>
<style>body { padding: 0; margin: 0; } #map { height: 100%; width: 100vw; }</style>
	
</head>
<body>



<div id="map"></div>
<script>

	const map = L.map('map').setView([46.8141074, -71.22255454], 15);

	const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	}).addTo(map);

const monumentwilfridlaurier = L.marker([46.8116484, -71.2308515]).addTo(map).bindPopup("<b2>Monument Wilfrid-Laurier</b><br />[[wikidata:Q3588381|Émile Brunet]],[[wikidata:Q28329637|André Gilbert]]").openPopup();
const sanstitrevuefragmentaire = L.marker([46.8142261, -71.2218666]).addTo(map).bindPopup("<b2>Sans titre (vue fragmentaire)</b><br />[[wikidata:Q16064291|Paul Lacroix]]").openPopup();
const lespetitsoiseauxdargile = L.marker([46.8141074, -71.2281203]).addTo(map).bindPopup("<b2>Les petits oiseaux d’argile</b><br />[[wikidata:Q64157154|Marcel, Jean]]").openPopup();
const lejour = L.marker([46.8119004, -71.2252834]).addTo(map).bindPopup("<b2>Le jour</b><br />[[wikidata:Q59668288|Paryse Martin]], Jean-François Fillion").openPopup();
const monumentrenerichard = L.marker([46.8124295, -71.2225498]).addTo(map).bindPopup("<b2>Monument René-Richard</b><br />[[wikidata:Q2866694|Alain Gourdon]]").openPopup();
const racines = L.marker([46.8129009, -71.2206319]).addTo(map).bindPopup("<b2>Racines</b><br />[[wikidata:Q64584723|Lucienne Cornet]]").openPopup();
const centremateria = L.marker([46.8133548, -71.2269495]).addTo(map).bindPopup("<b2>Centre Matéria</b><br />").openPopup();
const monumenthoratiowalker = L.marker([46.813264, -71.2230741]).addTo(map).bindPopup("<b2>Monument Horatio-Walker</b><br />[[wikidata:Q109265943|Jan Stohl]]").openPopup();
const bustedoscargilbert = L.marker([46.8121752, -71.2232311]).addTo(map).bindPopup("<b2>Buste d'Oscar Gilbert</b><br />[[wikidata:Q2422286|Félix Benneteau-Desgrois]]").openPopup();
const foule = L.marker([46.813637, -71.2260993]).addTo(map).bindPopup("<b2>Foule</b><br />[[wikidata:Q109500848|Atwood]]").openPopup();
const lascension = L.marker([46.8162751, -71.2215429]).addTo(map).bindPopup("<b2>L'Ascension</b><br />Easy Brad").openPopup();
const lenoyaucytoarchitectonique = L.marker([46.8141074, -71.2281203]).addTo(map).bindPopup("<b2>Le noyau cyt(o)-architectonique</b><br />[[wikidata:Q63565394|Ludovic Boney ]]").openPopup();
const grizzlyfuzz = L.marker([46.8131276, -71.2279667]).addTo(map).bindPopup("<b2>Grizzly Fuzz</b><br />").openPopup();
const unsieclefigedanslemulsiondutemps = L.marker([46.8141074, -71.2281203]).addTo(map).bindPopup("<b2>Un siècle figé dans l’émulsion du temps </b><br />Nadia Morin").openPopup();

monumentwilfridlaurier._icon.style.filter = "hue-rotate(120deg)"

function onLocationFound(e) {
		const radius = e.accuracy / 2;

		const locationMarker = L.marker(e.latlng).addTo(map)
			.bindPopup(`Vous êtes à moins de ${radius} mètres de ce point`).openPopup();

		const locationCircle = L.circle(e.latlng, radius).addTo(map);
	}

	function onLocationError(e) {
		alert(`Allons à la bibliothèque Gabrielle-Roy`);
		e.latlng = L.latlng(46.8141074, -71.22255454)
	}

	map.on('locationfound', onLocationFound);
	map.on('locationerror', onLocationError);
	
	map.locate({setView: true, maxZoom: 16});

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent(`You clicked the map at ${e.latlng.toString()}`)
			.openOn(map);
	}

	map.on('click', onMapClick);

</script>



</body>
</html>